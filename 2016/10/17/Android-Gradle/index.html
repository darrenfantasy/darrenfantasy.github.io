<!DOCTYPE html>
<html lang="default">
<head>
  <meta charset="utf-8">
  
  <title>Android-Gradle | darrenfantasy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Android build.gradle笔记
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293">
<meta property="og:type" content="article">
<meta property="og:title" content="Android-Gradle">
<meta property="og:url" content="http://yoursite.com/2016/10/17/Android-Gradle/index.html">
<meta property="og:site_name" content="darrenfantasy">
<meta property="og:description" content="Android build.gradle笔记
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293">
<meta property="og:updated_time" content="2017-03-11T15:06:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android-Gradle">
<meta name="twitter:description" content="Android build.gradle笔记
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/typing.css">
  <link rel="stylesheet" href="/css/algolia.css">
</head>


<a href="https://github.com/darrenfantasy"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

  
    <body>
  
      <div id="container" class="container">
        <article id="post-Android-Gradle" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/photos">Album</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
      <a href="#" class="popup-trigger">Search</a>
  </nav>
  <nav id="sub-nav">
    
  </nav>
</header>
<div class="site-search">
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>
</div>
  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android-Gradle
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <p>Android build.gradle笔记</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 设置编译 sdk 和编译工具的版本</div><div class="line">     */</div><div class="line">    compileSdkVersion <span class="number">24</span></div><div class="line">    buildToolsVersion <span class="string">"24.0.3"</span></div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 关于签名, 请参考 google 官方文档 Sign Your App: https://developer.android.com/studio/publish/app-signing.html#debug-mode</div><div class="line">     */</div><div class="line">    signingConfigs &#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * As 会自动帮我们使用 debug certificate 进行签名. 这个 debug certificate 每次安装 As 都会变,</div><div class="line">         * 因此不适合作为发布之用.</div><div class="line">         */</div><div class="line">        debug &#123;</div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="comment">/**</span></div><div class="line">         * 由于 Module-level Build Script(本文件) 也要放在 VCS 中管理, 所以不将密码等信息写在这里.</div><div class="line">         * 一般的做法是: 在本机设置环境变量, 然后通过下面代码中演示的这种方式读取.</div><div class="line">         * 当然, 最佳实践也指导我们将 `gradle.properties` 排除在 VCS 之外,</div><div class="line">         * 此时, 也在该文件中将密码设置为变量, 然后在此读取使用.</div><div class="line">         */</div><div class="line">        release &#123;</div><div class="line">            <span class="function">storeFile <span class="title">file</span><span class="params">(<span class="string">"$System.env.STORE_FILE"</span>)</span></span></div><div class="line">            storePassword "$System.env.STORE_PASSWORD"</div><div class="line">            keyAlias "$System.env.KEY_ALIAS"</div><div class="line">            keyPassword "$System.env.KEY_PASSWORD"</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 为所有的 build variants 设置默认的值. 关于 build variant, 我们后面会用一张图片说明</div><div class="line">     */</div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.walfud.myapplication"</span></div><div class="line">        minSdkVersion <span class="number">23</span></div><div class="line">        targetSdkVersion <span class="number">24</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * type 默认会有 debug 和 release. 不管你写不写都如此.</div><div class="line">     * 通常, 我们在 debug 中保留默认值, release 中开启混淆, 并使用私有的签名</div><div class="line">     */</div><div class="line">    buildTypes &#123;</div><div class="line">        debug &#123;</div><div class="line">            <span class="comment">// 使用默认值</span></div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        release &#123;</div><div class="line">            <span class="comment">// 混淆</span></div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</div><div class="line">     </div><div class="line">            <span class="comment">// 签名</span></div><div class="line">            signingConfig signingConfigs.release</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * flavor 强调的是不同的版本, 比如付费版和免费版.</div><div class="line">     * 在国内, 这个字段更多被用于区分不同的渠道, 即 360 渠道, 小米渠道等等.</div><div class="line">     */</div><div class="line">    productFlavors &#123;</div><div class="line">        m360 &#123;&#125;</div><div class="line">        xiaomi &#123;&#125;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 这个选项基本不用.</div><div class="line">     * lt;a href="http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits"gt;官方说lt;/agt;: 使用 splits 可以比使用 flavor 更加有效创建多 apk.</div><div class="line">     * 目前而言, 仅支持 Density 和 ABIs 这两个分类.</div><div class="line">     */</div><div class="line">    splits &#123;</div><div class="line">        <span class="comment">// 按屏幕尺寸</span></div><div class="line">        density &#123;</div><div class="line">            enable <span class="keyword">true</span></div><div class="line">     </div><div class="line">            <span class="comment">// 默认包含全部分辨率, 这里是剔除一些我们不要的</span></div><div class="line">            exclude <span class="string">"ldpi"</span>, <span class="string">"mdpi"</span>, <span class="string">"xxxhdpi"</span>, <span class="string">"400dpi"</span>, <span class="string">"560dpi"</span>, <span class="string">"tvdpi"</span></div><div class="line">        &#125;</div><div class="line">     </div><div class="line">        <span class="comment">// 按架构</span></div><div class="line">        abi &#123;</div><div class="line">            enable <span class="keyword">true</span></div><div class="line">     </div><div class="line">            <span class="comment">// 使用 `reset()` 后, 我们就相当于不包含任何架构,</span></div><div class="line">            <span class="comment">// 这种情况下我们就可以通过 `include` 指定想要使用的架构</span></div><div class="line">            reset()</div><div class="line">     </div><div class="line">            include <span class="string">'x86'</span>, <span class="string">'armeabi-v7a'</span></div><div class="line">            universalApk <span class="keyword">true</span>       <span class="comment">// 是否同时生成一个包含全部 Architecture 的包</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"></div><div class="line">- 这个项目的依赖</div><div class="line">   */</div><div class="line">  dependencies &#123;</div><div class="line">   <span class="comment">/**</span></div><div class="line">  - fileTree 导入 libs 目录下的所有 jar 文件</div><div class="line">    */</div><div class="line"></div><div class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 想导入本地 aar, 首先需要指明本地 aar 的位置, 如下 `repositories` 中所示, 我们把 aar 放在了</div><div class="line">     * Module-level 的 libs 目录下. 然后引用这个文件即可.</div><div class="line">     */</div><div class="line">    <span class="title">compile</span><span class="params">(name: <span class="string">'components'</span>, ext: <span class="string">'aar'</span>)</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"></div><div class="line">- 配置了去哪里查找这个模块依赖文件</div><div class="line">   */</div><div class="line">  repositories &#123;</div><div class="line">   flatDir &#123;</div><div class="line">       dirs <span class="string">'libs'</span></div><div class="line">   &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p><strong>Gradle</strong>是一个基于Apache Ant和Apache Maven概念的项目<strong>自动化建构</strong>工具。它可以帮你管理项目中的差异,依赖,编译,打包,部署等,你可以定义满足自己需要的构建逻辑,写入到build.gradle中供日后复用。</p>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2016/10/17/Android-Gradle/" class="article-date">
  <time datetime="2016-10-17T07:54:36.000Z" itemprop="datePublished">2016-10-17</time>
</a>

        </li>
        
        
          <li>
            <span class="label">Tag:</span>
            
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>


          </li>
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2016/10/18/singleton_pattern/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          单例模式
        
      </div>
    </a>
  
  
    <a href="/2016/10/11/canvas/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">canvas</div>
    </a>
  
</nav>


  
</article>


  <section id="comments" class="comments">
  <div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2128029"></script>
  </section>



      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>stay hungry , stay foolish .</p>


  
    <span id="busuanzi_container_page_pv">
         <i class="fa fa-flag"></i>    你是第<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>个阅读本文的小伙伴
    </span>
  
      </div>
  </footer>

      

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


  <script src="http://cdn.bootcss.com/instantsearch.js/1.5.1/instantsearch.js"></script>
  <script src="/js/algolia.js"></script>
  <script src="/js/photoswipe.js"></script>
  <script src="/js/photoswipe-ui-default.js"></script>

<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
      <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
    </div>
  </body>
</html>
